<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Valentine's Love Letter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style-pages.css"> 
    <link rel="stylesheet" href="style-musicPlayer.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Chibi Characters Container -->
    <div id="chibi-container"></div>
    
    <header>
        <h1><i class="fas fa-heart"></i> My Valentine <i class="fas fa-heart"></i></h1>
        <p class="subtitle">A digital scrapbook of love and memories</p>
    </header>
    
    <!-- Page Navigation -->
    <div class="page-nav">
        <button class="nav-btn active" data-page="1">1</button>
        <button class="nav-btn" data-page="2">2</button>
        <button class="nav-btn" data-page="3">3</button>
        <button class="nav-btn" data-page="4">4</button>
        <button class="nav-btn" data-page="5">5</button>
        <button class="nav-btn" data-page="6">6</button>
    </div>
    
    <!-- Scrapbook Pages Container -->
    <div class="scrapbook-container">
        <!-- Page 1: Cover -->
        <div class="page active" id="page1">
            <div class="tape" style="top: 20px; left: 50px;"></div>
            <div class="heart-sticker" style="top: 50px; right: 15px;"></div>
            
            <div class="cover-page">
                <div class="cover-title">
                    HAPPY VALENTINE'S DAY<br>
                    <span style="font-size: 2.5rem; color: #8D6E63;">MY LOVE</span>
                </div>
                
                <div class="cover-subtitle">
                    A collection of memories just for you
                </div>
                
                <div class="cover-image">
                    <img src="https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="Valentine's Day">
                </div>
                
                <button class="next-btn" id="nextBtn">
                    Open My Love Letter <i class="fas fa-heart"></i>
                </button>
            </div>
        </div>
        
        <!-- Page 2: Love Letter -->
        <div class="page" id="page2">
            <div class="tape" style="top: 150px; right: 50px;"></div>
            
            <div class="page-title">
                <h2><i class="fas fa-envelope"></i> A Love Letter Just For You</h2>
            </div>
            
            <div class="love-letter">
                <div class="letter-content">
                    <p>My Dearest Love,</p>
                    
                    <p>You are the most beautiful creation God has ever made. You are everything I could have dreamed of and so much more. Having you in my life feels like a blessing I'll never take for granted.</p>
                    
                    <p>You are the most amazing person I've ever known, and my heart is endlessly grateful for you. I love you today, I'll love you tomorrow, and I'll love you forever‚Äîno matter what, always.</p>
                    
                    <p>Yes, you're my lover, there is no one else. My heart belongs to you completely. Every moment with you is precious, every memory a treasure.</p>
                    
                    <p>Me & you... forever.</p>
                    
                    <div class="signature">
                        With all my love,<br>
                        Always yours
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page 3: Photos & Memories -->
        <div class="page" id="page3">
            
            <div class="page-title">
                <h2><i class="fas fa-images"></i> Our Special Memories</h2>
            </div>
            
            <div class="photos-page">
                <div class="media-grid">
                    <!-- Photo 1 -->
                    <div class="media-item">
                        <img src="Images\first-out.jpeg" alt="First outing together">
                        <div class="media-caption">Night Cafe Meet!!</div>
                    </div>
                    
                    <!-- Photo 2 -->
                    <div class="media-item">
                        <img src="Images\random.jpeg" alt="Laughing together">
                        <div class="media-caption">That time we couldn't stop laughing</div>
                    </div>
                    
                    <!-- Video 1 -->
                    <div class="media-item">
                        <video controls poster="Images\video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="media-caption">Moments in the day!!</div>
                    </div>
                    
                    <!-- Photo 4 -->
                    <div class="media-item">
                        <img src="Images/krauta.jpeg" alt="Celebration">
                        <div class="media-caption">Celebrating together</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page 4: Song -->
        <div class="page" id="page4">
            <!-- floating hearts background -->
            <div class="heart-bg">
                <i class="fas fa-heart" style="top: 10%; left: 2%; animation-delay: 0s;"></i>
                <i class="fas fa-heart" style="top: 70%; left: 90%; font-size: 32px; animation-delay: 2s;"></i>
                <i class="fas fa-heart" style="top: 40%; left: 20%; font-size: 20px; animation-delay: 1s;"></i>
                <i class="fas fa-heart" style="top: 80%; left: 15%; font-size: 28px; animation-delay: 0.5s;"></i>
                <i class="fas fa-heart" style="top: 20%; left: 85%; font-size: 18px; animation-delay: 3s;"></i>
                <i class="fas fa-heart" style="top: 55%; left: 45%; font-size: 40px; animation-delay: 0.8s;"></i>
                <i class="fas fa-heart" style="top: 88%; left: 70%; font-size: 24px; animation-delay: 1.8s;"></i>
            </div>

            <!-- main player card üíå -->
            <div class="player-card">
                <!-- extra decoration -->
                <div class="candy-stripe"></div>
                <div class="candy-stripe right"></div>

                <!-- header :3 -->
                <div class="player-header">
                <div class="bear-avatar">
                    <i class="fas fa-bear"></i> <!-- cute bear icon (fas fa-bear exists in pro? we use fa-bear from FontAwesome? using alternate) -->
                    <i class="fas fa-gift" style="display: none;"></i> <!-- fallback, but we use fas fa-bear? I'll use fa-heart-bear? I'll use teddy bear: fa-robot? no! -->
                    <i class="fas fa-heart" style="font-size: 42px; color: #6b4e4e; display: none;"></i>
                    <!-- better: use a cat/ bear mix: actual bear exists in FA6 free as 'fa-bear'? yes, since 6.0? use solid bear -->
                    <i class="fas fa-bear" style="font-size: 40px; color: #5d3a3a;"></i>
                </div>
                <div class="valentine-text">
                    <h1>‚ù§Ô∏è  valentunes</h1>
                    <p><i class="fas fa-candy-cane"></i> sweetheart session</p>
                </div>
                </div>

                <!-- disc area with rotating love heart (spinning when playing) -->
                <div class="album-area">
                <div class="vinyl-wrapper">
                    <div class="vinyl" id="vinylDisc">
                    <div class="heart-center" id="heartCenter">
                        <i class="fas fa-heart" id="heartIcon"></i>
                    </div>
                    </div>
                </div>
                <div class="song-info">
                    <span class="song-title" id="currentSongTitle">Love Note</span>
                    <span class="artist-name" id="currentSongArtist">be my valentine</span>
                </div>
                </div>

                <!-- progress bar with time -->
                <div class="progress-section">
                <div class="time-row">
                    <span id="currentTime">0:00</span>
                    <span id="durationTime">3:21</span>
                </div>
                <div class="progress-bar-bg" id="progressBarBg">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                </div>

                <!-- controller buttons -->
                <div class="controls">
                <button class="ctrl-btn" id="prevBtn"><i class="fas fa-backward-step"></i></button>
                <button class="ctrl-btn play-pause" id="playPauseBtn"><i class="fas fa-play" id="playPauseIcon"></i></button>
                <button class="ctrl-btn" id="nextBtn"><i class="fas fa-forward-step"></i></button>
                </div>

                <!-- valentine playlist ~ -->
                <div class="playlist">
                <h3><i class="fas fa-list-music"></i> xoxo playlist</h3>
                <ul class="song-list" id="playlistContainer">
                    <!-- js filled -->
                </ul>
                </div>
                <div class="tiny-heart">
                <i class="fas fa-heart"></i> for you <i class="fas fa-heart"></i>
                </div>
            </div>

            <script>
                (function(){
                "use strict";

                // cute valentine's day playlist üíï
                const playlist = [
                    {
                    title: "Love Note",
                    artist: "cupid & bear",
                    file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", // placeholder
                    duration: 321
                    },
                    {
                    title: "Strawberry Kisses",
                    artist: "sweetheart choir",
                    file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
                    duration: 285
                    },
                    {
                    title: "Be My Baby",
                    artist: "the teddy bears",
                    file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",
                    duration: 294
                    },
                    {
                    title: "Candy Heart",
                    artist: "conversation hearts",
                    file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3",
                    duration: 308
                    },
                    {
                    title: "You & Me",
                    artist: "cherry blush",
                    file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",
                    duration: 276
                    }
                ];

                // ---------- DOM elements ----------
                const audio = new Audio();
                let isPlaying = false;
                let currentSongIndex = 0;

                const playPauseBtn = document.getElementById('playPauseBtn');
                const playPauseIcon = document.getElementById('playPauseIcon');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const progressFill = document.getElementById('progressFill');
                const progressBarBg = document.getElementById('progressBarBg');
                const currentTimeEl = document.getElementById('currentTime');
                const durationTimeEl = document.getElementById('durationTime');
                const songTitleEl = document.getElementById('currentSongTitle');
                const artistEl = document.getElementById('currentSongArtist');
                const vinylDisc = document.getElementById('vinylDisc');
                const playlistContainer = document.getElementById('playlistContainer');

                // ---------- helper ----------
                function formatTime(seconds) {
                    if (isNaN(seconds) || seconds < 0) seconds = 0;
                    const mins = Math.floor(seconds / 60);
                    const secs = Math.floor(seconds % 60);
                    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
                }

                // load song data
                function loadSong(index) {
                    const song = playlist[index];
                    if (!song) return;
                    songTitleEl.textContent = song.title;
                    artistEl.textContent = `üéÄ ${song.artist}`;
                    audio.src = song.file;
                    durationTimeEl.textContent = formatTime(song.duration);
                    // reset progress
                    progressFill.style.width = '0%';
                    currentTimeEl.textContent = '0:00';
                    // update active item in playlist
                    updateActivePlaylist(index);
                }

                // update active playlist style
                function updateActivePlaylist(activeIndex) {
                    const items = document.querySelectorAll('.song-item');
                    items.forEach((item, idx) => {
                    if (idx === activeIndex) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                    });
                }

                // play song
                function playSong() {
                    audio.play()
                    .then(() => {
                        isPlaying = true;
                        playPauseIcon.className = 'fas fa-pause';
                        vinylDisc.classList.add('rotating');
                    })
                    .catch(err => {
                        console.warn("playback failed - Valentine demo (autoplay policy)");
                        isPlaying = false;
                        playPauseIcon.className = 'fas fa-play';
                        vinylDisc.classList.remove('rotating');
                    });
                }

                // pause song
                function pauseSong() {
                    audio.pause();
                    isPlaying = false;
                    playPauseIcon.className = 'fas fa-play';
                    vinylDisc.classList.remove('rotating');
                }

                // toggle play/pause
                function togglePlayPause() {
                    if (isPlaying) {
                    pauseSong();
                    } else {
                    playSong();
                    }
                }

                // go to previous song
                function prevSong() {
                    currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
                    loadSong(currentSongIndex);
                    if (isPlaying) {
                    playSong(); // will restart
                    } else {
                    // if not playing, just load
                    }
                }

                // go to next song
                function nextSong() {
                    currentSongIndex = (currentSongIndex + 1) % playlist.length;
                    loadSong(currentSongIndex);
                    if (isPlaying) {
                    playSong();
                    }
                }

                // update progress bar & time
                function updateProgress() {
                    if (audio.duration && !isNaN(audio.duration)) {
                    const percent = (audio.currentTime / audio.duration) * 100;
                    progressFill.style.width = `${percent}%`;
                    currentTimeEl.textContent = formatTime(audio.currentTime);
                    } else {
                    // fallback using default duration from playlist
                    const song = playlist[currentSongIndex];
                    if (song && song.duration) {
                        const percent = (audio.currentTime / song.duration) * 100;
                        progressFill.style.width = `${percent}%`;
                        currentTimeEl.textContent = formatTime(audio.currentTime);
                    }
                    }
                }

                // set progress when clicking on bar
                function setProgress(e) {
                    const rect = progressBarBg.getBoundingClientRect();
                    const offsetX = e.clientX - rect.left;
                    const width = rect.width;
                    let percentage = offsetX / width;
                    percentage = Math.max(0, Math.min(1, percentage));
                    
                    const song = playlist[currentSongIndex];
                    if (song && song.duration) {
                    const newTime = song.duration * percentage;
                    audio.currentTime = newTime;
                    // update immediately
                    progressFill.style.width = `${percentage * 100}%`;
                    currentTimeEl.textContent = formatTime(newTime);
                    } else if (audio.duration && !isNaN(audio.duration)) {
                    audio.currentTime = audio.duration * percentage;
                    }
                }

                // render playlist from array
                function renderPlaylist() {
                    let html = '';
                    playlist.forEach((song, index) => {
                    html += `<li class="song-item ${index === currentSongIndex ? 'active' : ''}" data-index="${index}">
                        <i class="fas fa-heart"></i>
                        <div class="song-info-item">
                        <span class="song-name">${song.title}</span>
                        <span class="song-artist">${song.artist}</span>
                        </div>
                        <span class="love-tag"><i class="fas fa-heart"></i> ${formatTime(song.duration)}</span>
                    </li>`;
                    });
                    playlistContainer.innerHTML = html;

                    // attach click event to each song-item
                    document.querySelectorAll('.song-item').forEach(item => {
                    item.addEventListener('click', function(e) {
                        const idx = parseInt(this.dataset.index, 10);
                        if (!isNaN(idx) && idx !== currentSongIndex) {
                        currentSongIndex = idx;
                        loadSong(currentSongIndex);
                        if (isPlaying) {
                            playSong(); // play new song
                        } else {
                            // user might want to start playing? we start play.
                            playSong(); // auto-play for cuteness!
                        }
                        } else if (idx === currentSongIndex) {
                        // same song: just play if not playing
                        if (!isPlaying) playSong();
                        }
                    });
                    });
                }

                // ---------- event listeners ----------
                playPauseBtn.addEventListener('click', togglePlayPause);

                prevBtn.addEventListener('click', function() {
                    prevSong();
                });

                nextBtn.addEventListener('click', function() {
                    nextSong();
                });

                progressBarBg.addEventListener('click', setProgress);

                // audio timeupdate
                audio.addEventListener('timeupdate', updateProgress);

                // when song ends, go next
                audio.addEventListener('ended', function() {
                    nextSong();
                    // autoplay next
                    if (playlist.length > 0) {
                    // ensure playing after load
                    playSong();
                    }
                });

                // when audio metadata loaded (duration maybe)
                audio.addEventListener('loadedmetadata', function() {
                    if (audio.duration && !isNaN(audio.duration)) {
                    durationTimeEl.textContent = formatTime(audio.duration);
                    } else {
                    // fallback
                    durationTimeEl.textContent = formatTime(playlist[currentSongIndex].duration);
                    }
                });

                // initial load
                loadSong(0);
                renderPlaylist();

                // extra cute: set fake duration display (since soundhelix files may not give correct duration)
                // we already set duration from playlist in loadSong, but keep it.
                // but to keep consistent: override loadedmetadata with playlist duration
                audio.addEventListener('loadedmetadata', function() {
                    // we prefer our cute playlist duration :3
                    if (playlist[currentSongIndex]) {
                    durationTimeEl.textContent = formatTime(playlist[currentSongIndex].duration);
                    }
                });

                // if error loading audio (just for demo, keep the cuteness)
                audio.addEventListener('error', function() {
                    console.log("audio error (placeholder) ‚Äî still cute!");
                    // keep default time display
                });

                // progress bar dragging could be improved but we keep click

                // set default duration display after loadSong:
                // already set in loadSong

                // make vinyl spin only when playing; pause removes class
                // ensure class removed when pause
                window.addEventListener('load', function() {
                    // preload none? just bear
                });

                // also update current time on audio timeupdate already

                // manual trigger for timeupdate to show 0:00 properly
                // manually update progress each second via interval? timeupdate is fine.

                // also, if we want progress to show when seek
                // .............
                // also adding small hover to heart disc
                // set default duration display
                durationTimeEl.textContent = formatTime(playlist[0].duration);
                })();
            </script>

            <!-- bear icon fallback? using FA bear (solid) -->
            <!-- Font Awesome kit? not needed, using cdn -->
            <!-- fa-bear exists in FontAwesome 6? yes from v6. free solid: fa-bear -->
            <!-- If the version doesn't include bear, fallback: use fa-gift? We used fa-bear, but maybe use a cat? I'll keep as bear but provide fallback -->
            <script>
                // tiny fallback if fa-bear doesn't exist (it does in 6.0 free)
                (function() {
                let bearIcon = document.querySelector('.fa-bear');
                if (bearIcon) {
                    // all good!
                } else {
                    // replace with gift/ heart bear 
                    let avatar = document.querySelector('.bear-avatar i');
                    if (avatar) {
                    avatar.className = 'fas fa-gift'; // cute gift
                    }
                }
                })();
            </script>
        </div>
        
        <!-- Page 5: Postcard -->
        <div class="page" id="page5">            
            <div class="page-title">
                <h2><i class="fas fa-stamp"></i> Valentine's Postcard</h2>
            </div>
            
            <div class="postcard-page">
                <div class="postcard">
                    <div class="postcard-stamp">
                        LOVE
                    </div>
                    
                    <h2>Happy Valentine's Day!</h2>
                    
                    <div class="postcard-message">
                        Sending you all my love on this special day. You mean everything to me, and I'm so grateful to have you in my life. No matter where life takes us, my heart will always be with you.
                    </div>
                    
                    <div style="font-size: 1.5rem; color: #D32F2F; margin-top: 30px;">
                        Forever Yours,
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page 6: Final Page -->
        <div class="page" id="page6">
            <div class="heart-sticker" style="bottom: 50px; right: 50px;"></div>
            
            <div class="page-title">
                <h2><i class="fas fa-heart"></i> Always & Forever</h2>
            </div>
            
            <div class="final-page">
                <div class="final-message">
                    I'd cry if someone gifts me this... because it comes from the heart. Every word, every image, every moment in this digital scrapbook is a testament to my love for you.
                </div>
                
                <div class="final-heart">
                    <i class="fas fa-heart"></i>
                </div>
                
                <div class="final-message">
                    Thank you for being you. Thank you for loving me. Here's to countless more Valentine's Days together.
                </div>
                
                <div style="margin-top: 40px; font-size: 2rem; color: #D32F2F; font-family: 'Dancing Script', cursive;">
                    Me & You
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Made with <span style="color: #FF8A8A;"><i class="fas fa-heart"></i></span> for the most special person in my life</p>
        <p>Happy Valentine's Day, my love. Always yours.</p>
    </footer>
    
    <script>
        // Create cute chibi characters that run at the bottom of the screen
        function createChibiCharacters() {
            const container = document.getElementById('chibi-container');
            const chibiCount = 2; // 4 boys and 4 girls
            const characters = [
                { type: 'boy', right: 'Images/right.png', left: 'Images/left.png', frames: 3 }, 
                { type: 'girl', right: 'Images/right-girl.png', left: 'Images/left-girl.png', frames: 3 }
            ];
            
            for (let i = 0; i < 2; i++) {
                const config = characters[i % 2];
                const chibi = document.createElement('div');
                chibi.className = `chibi ${config.type}`;
                
                // Random starting position
                chibi.style.left = `${Math.random() * 90}%`;
                chibi.style.bottom = '20px';
                chibi.style.width = '100px';  // Adjust based on sprite size
                chibi.style.height = '120px'; // Adjust based on sprite size
                chibi.style.position = 'fixed';
                chibi.style.zIndex = '100';
                chibi.style.backgroundSize = '300% auto'; // Assuming 3 frames per row
                
                container.appendChild(chibi);
                animateChibi(chibi, config);
            }
        }
        
        // Animate chibi to run back and forth at the bottom
        function animateChibi(chibi) {
            for (let i = 0; i < 2; i++) {
                    const config = configs[i];
                    const chibi = document.createElement('div');
                    chibi.className = `chibi ${config.type}`;
                    chibi.style.left = `${20 + (i * 40)}%`; // Space them out
                    
                    container.appendChild(chibi);
                    animateChibi(chibi, config);
                }
            }

            function animateChibi(chibi, config) {
                let direction = 1; // 1 for right, -1 for left
                let speed = 1.5;
                let moving = true;
                let frame = 0;
                
                // This function runs the "Walking" animation cycle
                function updateFrame() {
                    if (moving) {
                        frame = (frame + 1) % 3; // Cycle 0, 1, 2
                        
                        // Each column is 50% of the remaining space in a 3-column setup
                        // 0% = Col 1, 50% = Col 2, 100% = Col 3
                        let xPos = frame * 50; 
                        chibi.style.backgroundPosition = `${xPos}% 0%`; 
                    }
                }

                // This function moves the character across the screen
                function move() {
                    if (!moving) {
                        requestAnimationFrame(move);
                        return;
                    }

                    let currentLeft = parseFloat(chibi.style.left) || 0;
                    let newLeft = currentLeft + (direction * (speed / window.innerWidth) * 100);

                    // Change image based on direction
                    chibi.style.backgroundImage = `url('${direction === 1 ? config.right : config.left}')`;

                    // Bounce off walls
                    if (newLeft <= 0) direction = 1;
                    if (newLeft >= 90) direction = -1;

                    chibi.style.left = `${newLeft}%`;
                    requestAnimationFrame(move);
                }

                // Start the loops
                setInterval(updateFrame, 150); // Change walking pose every 150ms
                requestAnimationFrame(move);   // Move smoothly

                // Interaction: Pause on hover
                chibi.addEventListener('mouseenter', () => moving = false);
                chibi.addEventListener('mouseleave', () => moving = true);
                    }
        
        // Page navigation
        const navButtons = document.querySelectorAll('.nav-btn');
        const pages = document.querySelectorAll('.page');
        const nextBtn = document.getElementById('nextBtn');
        const loveSong = document.getElementById('loveSong');
        
        // Add CSS for heart animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes heartFloatUp {
                0% { opacity: 0; transform: translateX(-50%) translateY(0) scale(0.5); }
                50% { opacity: 1; transform: translateX(-50%) translateY(-30px) scale(1.2); }
                100% { opacity: 0; transform: translateX(-50%) translateY(-60px) scale(1); }
            }
        `;
        document.head.appendChild(style);
        
        // Function to switch pages
        function switchPage(pageNumber) {
            // Hide all pages
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const selectedPage = document.getElementById(`page${pageNumber}`);
            selectedPage.classList.add('active');
            
            // Update active button
            navButtons.forEach(button => {
                button.classList.remove('active');
                if (parseInt(button.getAttribute('data-page')) === pageNumber) {
                    button.classList.add('active');
                }
            });
            
            // If switching to song page (page 4), play the song
            if (pageNumber === 4) {
                // Auto-play song when page loads
                setTimeout(() => {
                    loveSong.play().catch(e => {
                        console.log("Auto-play was prevented. User interaction required.");
                    });
                }, 500);
            } else {
                // Pause song when leaving song page
                loveSong.pause();
            }
            
            // Scroll to top of page
            window.scrollTo(0, 0);
        }
        
        // Add click event to navigation buttons
        navButtons.forEach(button => {
            button.addEventListener('click', function() {
                const pageNumber = parseInt(this.getAttribute('data-page'));
                switchPage(pageNumber);
            });
        });
        
        // Next button on cover page
        nextBtn.addEventListener('click', function() {
            switchPage(2);
        });
        
        // Music player controls
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        
        playBtn.addEventListener('click', function() {
            loveSong.play();
        });
        
        pauseBtn.addEventListener('click', function() {
            loveSong.pause();
        });
        
        stopBtn.addEventListener('click', function() {
            loveSong.pause();
            loveSong.currentTime = 0;
        });

        // Add touch event listeners for better mobile interaction
        document.addEventListener('DOMContentLoaded', function() {
            // Prevent zoom on double-tap
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            
            // Improve button feedback on touch devices
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                button.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // Adjust chibi animation for mobile performance
            if (window.innerWidth <= 768) {
                const chibis = document.querySelectorAll('.chibi');
                chibis.forEach(chibi => {
                    chibi.style.transition = 'transform 0.2s';
                });
            }
        });
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            createChibiCharacters();
            switchPage(1); // Start on page 1
            
            // Add heart stickers to random media items
            const mediaItems = document.querySelectorAll('.media-item');
            mediaItems.forEach((item, index) => {
                if (index % 2 === 0) {
                    const heart = document.createElement('div');
                    heart.className = 'heart-sticker';
                    heart.style.top = '-15px';
                    heart.style.right = '-15px';
                    heart.style.width = '30px';
                    heart.style.height = '30px';
                    heart.style.zIndex = '5';
                    item.style.position = 'relative';
                    item.appendChild(heart);
                }
            });
            
            // Add floating hearts on click anywhere
            document.addEventListener('click', function(e) {
                // Don't create hearts if clicking on interactive elements
                if (e.target.closest('button') || e.target.closest('video') || e.target.closest('audio') || e.target.closest('.chibi')) {
                    return;
                }
                
                // Create heart at click position
                const heart = document.createElement('div');
                heart.innerHTML = '<i class="fas fa-heart"></i>';
                heart.style.position = 'fixed';
                heart.style.color = '#D32F2F';
                heart.style.fontSize = '24px';
                heart.style.left = `${e.clientX}px`;
                heart.style.top = `${e.clientY}px`;
                heart.style.zIndex = '1000';
                heart.style.pointerEvents = 'none';
                heart.style.transform = 'translate(-50%, -50%)';
                heart.style.animation = 'heartFloatUp 1.5s ease-out forwards';
                
                document.body.appendChild(heart);
                
                // Remove heart after animation
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 1500);
            });
        });
    </script>
</body>
</html>